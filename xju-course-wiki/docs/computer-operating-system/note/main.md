# 计算机操作系统

## 1 操作系统引论

- 操作系统的目标：方便性、有效性、可扩充性、开放性

## 2 进程的描述与控制

### 前趋图与程序执行

- 前趋图：有向无环图（DAG），用于描述进程之间执行的先后顺序。
- 程序顺序执行的特征：顺序性、封闭性、可再现性
- 程序并发执行的特征：间断性、失去封闭性、不可再现性（失去封闭性导致失去可再现性）

### 进程的描述

- 进程：进程是程序的执行过程，是系统进行资源分配和调度的一个独立单位。又称为重型进程。
    - 进程是一个可拥有资源的独立单位
    - 进程是一个可被独立调度和分派的基本单位
- 进程的基本状态：
    - 就绪态：进程已处于准备好执行的状态。即进程已分配到除 CPU 以外的所有必要资源后，只要再获得 CPU，便可立即执行
    - 执行态：进程获得 CPU 后，其程序“正在执行”这一状态
    - 阻塞态：正在执行的进程，由于发生某事件而暂时无法执行。此时会引发进程调度，OS 会把处理机分配给另一个就绪态的进程
    - 创建态：在创建进程的过程中，进程所需的资源系统尚不能满足，此时创建工作尚未完成，进程不能被调度运行的状态<br>![alt text](image.png)
    - 终止态：当一个进程到达了自然结束的终点，或是出现了无法克服的错误，或是被 OS 所终止，或是被其他有终止权的进程所终止时的状态<br>![alt text](image-1.png)

![alt text](image-2.png)

- 进程的挂起操作和进程状态的转换：引入的挂起原语和激活原语<br>![alt text](image-3.png)
- 进程管理中的数据结构（PCB）
    - PCB 中的信息
        - 进程标识符：外部标识符、内部标识符
        - 处理机状态
        - 进程调度信息
        - 进程控制信息
    - 组织方式
        - 线性方式
        - 链接方式
        - 索引方式

### 线程的概念

- 线程：是程序的执行过程，是系统进行资源分配和调度的一个比进程更小的基本单位。又称为轻型进程。

!!! note "为什么要引入线程？"

    没有线程时，处理机为使程序并发执行，需要：创建进程 -> 撤销进程 -> 进程切换。进程是一个资源的拥有者，在创建、撤销和切换中，系统要付出较大的时间开销。

    引入线程后，仅需保存和设置少量寄存器的内容。

- 线程的三个状态：执行态、就绪态、阻塞态
- 线程管理中的数据结构：线程控制块（TCB），包含线程标识符、一组寄存器、线程执行状态、优先级、线程专有存储区、信号屏蔽、堆栈指针。

## 3 处理机调度与死锁

### 调度概述

- 调度的三个层次
    - 高级调度（长程调度、作业调度）
    - 低级调度（短程调度、进程调度）
    - 中级调度（内存调度）
- 作业和作业调度
    - 作业：包含通常的程序、数据，还包含作业说明书，系统根据说明书对程序的运行就行控制。多批道处理系统中，将作业作为基本单位从外存掉

### 调度算法

### 实时调度

### 死锁概述

- 资源：
- 死锁：
- 必要条件
    - 互斥条件
    - 请求和保持
    - 不可抢占
    - 环路等待
- 处理死锁的方法
    - 预防死锁
    - 避免死锁
    - 检测死锁
    - 解除死锁

### 预防死锁

